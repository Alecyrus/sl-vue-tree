{"version":3,"sources":["webpack://SlVueTree/webpack/universalModuleDefinition","webpack://SlVueTree/webpack/bootstrap","webpack://SlVueTree/./src/sl-vue-tree.js","webpack://SlVueTree/./node_modules/vue-loader/lib/runtime/component-normalizer.js","webpack://SlVueTree/./src/sl-vue-tree.vue?75ef","webpack://SlVueTree/./src/sl-vue-tree.vue"],"names":["name","props","value","type","Array","default","edgeSize","Number","showBranches","Boolean","level","parentInd","allowMultiselect","scrollAreaHeight","maxScrollSpeed","data","rootCursorPosition","scrollIntervalId","scrollSpeed","lastSelectedNode","mouseIsDown","isDragging","lastMousePos","x","y","computed","cursorPosition","isRoot","getParent","nodes","nodeModels","copy","getNodes","children","gaps","i","push","selectionSize","getSelected","length","methods","setCursorPosition","pos","parentPath","map","nodeModel","ind","nodePath","concat","getNode","path","siblings","slice","getNodeSiblings","node","title","isLeaf","isExpanded","isSelected","pathStr","JSON","stringify","isFirstChild","isLastChild","emitInput","newValue","getRoot","$emit","emitSelect","selectedNodes","event","emitDrop","targetNode","position","emitToggle","toggledNode","emitNodeDblclick","emitNodeContextmenu","emitNodeclick","onNodeClickHandler","clickedNode","defaultPrevented","select","addToSelection","ctrlKey","newNodes","shiftSelectionMode","shiftKey","shiftSelectionStarted","traverse","onNodeMousemoveHandler","destNode","initialDraggingState","clientX","clientY","isDragStarted","$nodeItem","currentTarget","nodeHeight","offsetHeight","offsetY","placement","$root","$el","rootRect","getBoundingClientRect","$dragInfo","$refs","dragInfo","style","top","scrollTop","left","scrollBottomLine","bottom","scrollDownSpeed","scrollTopLine","scrollTopSpeed","startScroll","stopScroll","onNodeDropHandler","onNodeMousedownHandler","speed","setInterval","clearInterval","onNodeMouseupHandler","stopDrag","draggingNodes","draggingNode","checkNodeIsParent","nodeModelsToInsert","sourceSiblings","draggingNodeModel","destSiblings","destNodeModel","unshift","insertInd","splice","onToggleHandler","updateNode","stopPropagation","$parent","nodeToUpdate","patch","Object","assign","cb","shouldStop","forEach","nodeInd","itemPath","sourceNode","destPath","entity","parse"],"mappings":"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CA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACpGA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,qCAAqC,iCAAiC,EAAE;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA,mBAAmB;AACnB;AACA;AACA,mBAAmB;AACnB;AACA;AACA,mBAAmB;AACnB;AACA;AACA,mBAAmB;AACnB;AACA;AACA,mBAAmB;AACnB;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,oCAAoC,iCAAiC;AACrE,iBAAiB;AACjB;AACA;AACA;AACA;AACA,uBAAuB,oCAAoC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mCAAmC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qCAAqC;AACxD,4CAA4C,aAAa;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,yDAAyD,aAAa;AACtE;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACQ;AACR,a;;;;;;;;;;;;;;;ACjSA;AAAA;AACA;AACA;AACA;AACiP;AACjP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAaC;;AAED","file":"sl-vue-tree.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SlVueTree\"] = factory();\n\telse\n\t\troot[\"SlVueTree\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/sl-vue-tree.vue\");\n","\r\nexport default {\r\n  name: 'sl-vue-tree',\r\n  props: {\r\n    value: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    edgeSize: {\r\n      type: Number,\r\n      default: 3\r\n    },\r\n    showBranches: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    level: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    parentInd: {\r\n      type: Number\r\n    },\r\n    allowMultiselect: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    scrollAreaHeight: {\r\n      type: Number,\r\n      default: 70\r\n    },\r\n    maxScrollSpeed: {\r\n      type: Number,\r\n      default: 20\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      rootCursorPosition: null,\r\n      scrollIntervalId: 0,\r\n      scrollSpeed: 0,\r\n      lastSelectedNode: null,\r\n      mouseIsDown: false,\r\n      isDragging: false,\r\n      lastMousePos: {x: 0, y: 0}\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    cursorPosition() {\r\n      if (this.isRoot) return this.rootCursorPosition;\r\n      return this.getParent().cursorPosition;\r\n    },\r\n\r\n    nodes() {\r\n      if (this.isRoot) {\r\n        const nodeModels = this.copy(this.value);\r\n        return this.getNodes(nodeModels);\r\n      }\r\n\r\n      return this.getParent().nodes[this.parentInd].children;\r\n    },\r\n    /**\r\n   * gaps is using for nodes indentation\r\n   * @returns {number[]}\r\n   */\r\n    gaps() {\r\n      const gaps = [];\r\n      let i = this.level - 1;\r\n      if (!this.showBranches) i++;\r\n      while (i-- > 0) gaps.push(i);\r\n      return gaps;\r\n    },\r\n\r\n    isRoot() {\r\n      return !this.level\r\n    },\r\n\r\n    selectionSize() {\r\n      return this.getSelected().length;\r\n    }\r\n  },\r\n  methods: {\r\n\r\n    setCursorPosition(pos) {\r\n      if (this.isRoot) {\r\n        this.rootCursorPosition = pos;\r\n        return;\r\n      }\r\n      this.getParent().setCursorPosition(pos);\r\n    },\r\n\r\n    getNodes(nodeModels, parentPath = []) {\r\n\r\n      return nodeModels.map((nodeModel, ind) => {\r\n        const nodePath = parentPath.concat(ind);\r\n        return this.getNode(nodePath, nodeModel, nodeModels);\r\n      })\r\n    },\r\n\r\n    getNode(\r\n      path,\r\n      nodeModel = null,\r\n      siblings = null\r\n    ) {\r\n      const ind = path.slice(-1)[0];\r\n      siblings = siblings || this.getNodeSiblings(this.value, path);\r\n      nodeModel = nodeModel || siblings[ind];\r\n\r\n      const node = {\r\n\r\n        // define the all ISlTreeNodeModel props\r\n        title: nodeModel.title,\r\n        isLeaf: !!nodeModel.isLeaf,\r\n        children: nodeModel.children ? this.getNodes(nodeModel.children, path) : [],\r\n        isExpanded: nodeModel.isExpanded == void 0 ? true : !!nodeModel.isExpanded,\r\n        isSelected: !!nodeModel.isSelected,\r\n        data: nodeModel.data !== void 0 ? nodeModel.data : {},\r\n\r\n        // define the all ISlTreeNode computed props\r\n        path: path,\r\n        pathStr: JSON.stringify(path),\r\n        ind,\r\n        isFirstChild: ind == 0,\r\n        isLastChild: ind === siblings.length - 1\r\n      };\r\n      return node;\r\n    },\r\n\r\n    emitInput(newValue) {\r\n      this.getRoot().$emit('input', newValue);\r\n    },\r\n\r\n    emitSelect(selectedNodes, event) {\r\n      this.getRoot().$emit('select', selectedNodes, event);\r\n    },\r\n\r\n    emitDrop(targetNode, position, event) {\r\n      this.getRoot().$emit('drop', targetNode, position, event);\r\n    },\r\n\r\n    emitToggle(toggledNode, event) {\r\n      this.getRoot().$emit('toggle', toggledNode, event);\r\n    },\r\n\r\n    emitNodeDblclick(node, event) {\r\n      this.getRoot().$emit('nodedblclick', node, event);\r\n    },\r\n\r\n    emitNodeContextmenu(node, event) {\r\n      this.getRoot().$emit('nodecontextmenu', node, event);\r\n    },\r\n\r\n    emitNodeclick(node, event) {\r\n      this.getRoot().$emit('nodeclick', node, event);\r\n    },\r\n\r\n    // emitDragleave(node, direction, event) {\r\n    //   this.getRoot().$emit('dragleave', node, direction, event);\r\n    // },\r\n    //\r\n    // onDragleaveHandler(event, node) {\r\n    //   const parentRect = this.getRoot().$el.getBoundingClientRect();\r\n    //   if (event.clientY > parentRect.bottom) {\r\n    //     this.emitDragleave(node, 'bottom', event);\r\n    //   } else if (event.clientY < parentRect.top) {\r\n    //     this.emitDragleave(node, 'top', event);\r\n    //   }\r\n    // },\r\n\r\n    onNodeClickHandler(event, clickedNode) {\r\n      if (!this.isRoot) {\r\n        // handle event only in the root component\r\n        this.getRoot().onNodeClickHandler(event, clickedNode);\r\n        return;\r\n      }\r\n\r\n      this.emitNodeclick(clickedNode, event);\r\n\r\n      if (event.defaultPrevented) return;\r\n      this.select(clickedNode, event);\r\n    },\r\n\r\n    select(clickedNode, event = null, addToSelection = false) {\r\n      addToSelection = ((event && event.ctrlKey) || addToSelection) && this.allowMultiselect;\r\n      const newNodes = this.copy(this.value);\r\n      const shiftSelectionMode = this.allowMultiselect && event.shiftKey && this.lastSelectedNode;\r\n      const selectedNodes = [];\r\n      let shiftSelectionStarted = false;\r\n\r\n      this.traverse((node, nodeModel) => {\r\n\r\n        if (shiftSelectionMode) {\r\n          if (node.pathStr === clickedNode.pathStr || node.pathStr === this.lastSelectedNode.pathStr) {\r\n            nodeModel.isSelected = true;\r\n            shiftSelectionStarted = !shiftSelectionStarted;\r\n          }\r\n          if (shiftSelectionStarted) nodeModel.isSelected = true;\r\n        } else if (node.pathStr === clickedNode.pathStr) {\r\n          nodeModel.isSelected = true;\r\n        } else if (!addToSelection) {\r\n          if (nodeModel.isSelected) nodeModel.isSelected = false;\r\n        }\r\n\r\n        if (nodeModel.isSelected) selectedNodes.push(node);\r\n\r\n      }, newNodes);\r\n\r\n\r\n      this.lastSelectedNode = clickedNode;\r\n      this.emitInput(newNodes);\r\n      this.emitSelect(selectedNodes, event);\r\n    },\r\n\r\n    onNodeMousemoveHandler(event, destNode) {\r\n      if (!this.isRoot) {\r\n        this.getRoot().onNodeMousemoveHandler(event, destNode);\r\n        return;\r\n      }\r\n\r\n\r\n      const initialDraggingState = this.isDragging;\r\n      this.isDragging =\r\n        this.mouseIsDown &&\r\n        (this.lastMousePos.x !== event.clientX || this.lastMousePos.y !== event.clientY);\r\n\r\n      const isDragStarted = initialDraggingState === false && this.isDragging === true;\r\n\r\n\r\n\r\n      this.lastMousePos = {\r\n        x: event.clientX,\r\n        y: event.clientY\r\n      };\r\n\r\n\r\n      if (!this.isDragging) return;\r\n\r\n      if (isDragStarted && !destNode.isSelected) {\r\n        this.select(destNode, event);\r\n      }\r\n\r\n\r\n      const $nodeItem = event.currentTarget;\r\n      const nodeHeight = $nodeItem.offsetHeight;\r\n      const edgeSize = this.edgeSize;\r\n      const offsetY = event.offsetY;\r\n      let placement;\r\n\r\n\r\n      if (destNode.isLeaf) {\r\n        placement = offsetY >= nodeHeight / 2 ? 'after' : 'before';\r\n      } else {\r\n        if (offsetY <= edgeSize) {\r\n          placement = 'before';\r\n        } else if (offsetY >= nodeHeight - edgeSize) {\r\n          placement = 'after';\r\n        } else {\r\n          placement = 'inside';\r\n        }\r\n      }\r\n\r\n      this.setCursorPosition({ node: destNode, placement });\r\n\r\n      const $root = this.getRoot().$el;\r\n      const rootRect = $root.getBoundingClientRect();\r\n      const $dragInfo = this.$refs.dragInfo;\r\n\r\n      $dragInfo.style.top = (event.clientY - rootRect.top + $root.scrollTop) + 'px';\r\n      $dragInfo.style.left = (event.clientX - rootRect.left) + 'px';\r\n\r\n      const scrollBottomLine = rootRect.bottom - this.scrollAreaHeight;\r\n      const scrollDownSpeed = (event.clientY - scrollBottomLine) / (rootRect.bottom - scrollBottomLine);\r\n      const scrollTopLine = rootRect.top + this.scrollAreaHeight;\r\n      const scrollTopSpeed = (scrollTopLine - event.clientY) / (scrollTopLine - rootRect.top);\r\n\r\n      if (scrollDownSpeed > 0) {\r\n        this.startScroll(scrollDownSpeed);\r\n      } else if (scrollTopSpeed > 0) {\r\n        this.startScroll(-scrollTopSpeed)\r\n      } else {\r\n        this.stopScroll();\r\n      }\r\n    },\r\n\r\n\r\n    onNodeDropHandler(event, targetNode) {\r\n\r\n    },\r\n\r\n    onNodeMousedownHandler(event, node) {\r\n      if (!this.isRoot) {\r\n        this.getRoot().onNodeMousedownHandler(event, node);\r\n        return;\r\n      }\r\n      this.mouseIsDown = true;\r\n    },\r\n\r\n\r\n    startScroll(speed) {\r\n      const $root = this.getRoot().$el;\r\n      if (this.scrollSpeed === speed) {\r\n        return;\r\n      } else if (this.scrollIntervalId) {\r\n        this.stopScroll();\r\n      }\r\n\r\n      this.scrollSpeed = speed;\r\n      this.scrollIntervalId = setInterval(() => {\r\n        $root.scrollTop += this.maxScrollSpeed * speed;\r\n      }, 20);\r\n    },\r\n\r\n    stopScroll() {\r\n      clearInterval(this.scrollIntervalId);\r\n      this.scrollIntervalId = 0;\r\n      this.scrollSpeed = 0;\r\n    },\r\n\r\n    onNodeMouseupHandler(event, targetNode) {\r\n\r\n      if (!this.isRoot) {\r\n        this.getRoot().onNodeMouseupHandler(event, targetNode);\r\n        return;\r\n      }\r\n\r\n      this.mouseIsDown = false;\r\n\r\n      if (!this.isDragging) {\r\n        this.select(targetNode, event);\r\n        return;\r\n      }\r\n\r\n      if (!this.cursorPosition) {\r\n        this.stopDrag();\r\n        return;\r\n      };\r\n\r\n\r\n      const draggingNodes = this.getSelected();\r\n\r\n      // check that nodes is possible to insert\r\n      for (let draggingNode of draggingNodes) {\r\n        if (draggingNode.pathStr == this.cursorPosition.node.pathStr) {\r\n          this.stopDrag();\r\n          return;\r\n        }\r\n\r\n        if (this.checkNodeIsParent(draggingNode, this.cursorPosition.node)) {\r\n          this.stopDrag();\r\n          return;\r\n        };\r\n      }\r\n\r\n      const newNodes = this.copy(this.value);\r\n      const nodeModelsToInsert = [];\r\n\r\n      // find and mark dragging model to delete\r\n      for (let draggingNode of draggingNodes) {\r\n        const sourceSiblings = this.getNodeSiblings(newNodes, draggingNode.path);\r\n        const draggingNodeModel = sourceSiblings[draggingNode.ind];\r\n        nodeModelsToInsert.push(this.copy(draggingNodeModel));\r\n        draggingNodeModel['_markToDelete'] = true;\r\n      }\r\n\r\n\r\n      // insert dragging nodes to the new place\r\n      const destNode = this.cursorPosition.node;\r\n      const destSiblings = this.getNodeSiblings(newNodes, destNode.path);\r\n      const destNodeModel = destSiblings[destNode.ind];\r\n\r\n      if (this.cursorPosition.placement === 'inside') {\r\n        destNodeModel.children = destNodeModel.children || [];\r\n        destNodeModel.children.unshift(...nodeModelsToInsert);\r\n      } else {\r\n        const insertInd = this.cursorPosition.placement === 'before' ?\r\n          destNode.ind :\r\n          destNode.ind + 1;\r\n\r\n        destSiblings.splice(insertInd, 0, ...nodeModelsToInsert);\r\n      }\r\n\r\n\r\n\r\n      // delete dragging node from the old place\r\n      this.traverse((node, nodeModel, siblings) => {\r\n        let i = siblings.length;\r\n        while (i--) {\r\n          if (siblings[i]['_markToDelete']) siblings.splice(i, 1);\r\n        }\r\n      }, newNodes);\r\n\r\n\r\n      this.lastSelectedNode = null;\r\n      this.emitInput(newNodes);\r\n      this.emitDrop(draggingNodes, this.cursorPosition, event);\r\n      this.stopDrag();\r\n    },\r\n\r\n\r\n    onToggleHandler(event, node) {\r\n      this.updateNode(node, { isExpanded: !node.isExpanded });\r\n      this.emitToggle(node, event);\r\n      event.stopPropagation();\r\n    },\r\n\r\n    stopDrag() {\r\n      this.isDragging = false;\r\n      this.mouseIsDown = false;\r\n      this.setCursorPosition(null);\r\n      this.stopScroll();\r\n    },\r\n\r\n\r\n    getParent() {\r\n      return this.$parent;\r\n    },\r\n\r\n    getRoot() {\r\n      if (this.isRoot) return this;\r\n      return this.getParent().getRoot();\r\n    },\r\n\r\n    getNodeSiblings(nodes, path) {\r\n      if (path.length === 1) return nodes;\r\n      return this.getNodeSiblings(nodes[path[0]].children, path.slice(1));\r\n    },\r\n\r\n\r\n    updateNode(nodeToUpdate, patch) {\r\n      if (!this.isRoot) {\r\n        this.getParent().updateNode(nodeToUpdate, patch);\r\n        return;\r\n      }\r\n\r\n      const newNodes = this.copy(this.value);\r\n      this.traverse((node, nodeModel) => {\r\n        if (node.pathStr !== nodeToUpdate.pathStr) return;\r\n        Object.assign(nodeModel, patch);\r\n      }, newNodes);\r\n\r\n      this.emitInput(newNodes);\r\n    },\r\n\r\n    getSelected() {\r\n      const selectedNodes = [];\r\n      this.traverse((node) => {\r\n        if (node.isSelected) selectedNodes.push(node);\r\n      });\r\n      return selectedNodes;\r\n    },\r\n\r\n\r\n    traverse(\r\n      cb,\r\n      nodeModels = null,\r\n      parentPath = []\r\n    ) {\r\n      if (!nodeModels) nodeModels = this.value;\r\n\r\n      let shouldStop = false;\r\n\r\n      const nodes = [];\r\n\r\n      nodeModels.forEach((nodeModel, nodeInd) => {\r\n        const itemPath = parentPath.concat(nodeInd);\r\n        const node = this.getNode(itemPath, nodeModel, nodeModels);\r\n        shouldStop = cb(node, nodeModel, nodeModels) === false;\r\n        nodes.push(node);\r\n\r\n        if (shouldStop) return false;\r\n\r\n        if (nodeModel.children) {\r\n          shouldStop = this.traverse(cb, nodeModel.children, itemPath) === false;\r\n        }\r\n      });\r\n\r\n      return !shouldStop ? nodes : false;\r\n    },\r\n\r\n    checkNodeIsParent(sourceNode, destNode) {\r\n      const destPath = destNode.path;\r\n      return JSON.stringify(destPath.slice(0, sourceNode.path.length)) == sourceNode.pathStr;\r\n    },\r\n\r\n    copy(entity) {\r\n      return JSON.parse(JSON.stringify(entity));\r\n    }\r\n\r\n  }\r\n};\r\n","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  scriptExports = scriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof scriptExports.default\n  if (type === 'object' || type === 'function') {\n    scriptExports = scriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () { injectStyles.call(this, this.$root.$options.shadowRoot) }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"sl-vue-tree\", class: { \"sl-vue-tree-root\": _vm.isRoot } },\n    [\n      _vm._l(_vm.nodes, function(node, nodeInd) {\n        return _c(\n          \"div\",\n          {\n            staticClass: \"sl-vue-tree-node\",\n            class: { \"sl-vue-tree-selected\": node.isSelected }\n          },\n          [\n            _c(\"div\", {\n              directives: [\n                {\n                  name: \"show\",\n                  rawName: \"v-show\",\n                  value:\n                    _vm.cursorPosition &&\n                    _vm.cursorPosition.node.pathStr === node.pathStr &&\n                    _vm.cursorPosition.placement === \"before\",\n                  expression:\n                    \"\\n        cursorPosition &&\\n        cursorPosition.node.pathStr === node.pathStr &&\\n        cursorPosition.placement === 'before'\\n      \"\n                }\n              ],\n              staticClass: \"sl-vue-tree-cursor sl-vue-tree-cursor_before\",\n              on: {\n                dragover: function(event) {\n                  return event.preventDefault()\n                }\n              }\n            }),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              {\n                staticClass: \"sl-vue-tree-node-item\",\n                class: {\n                  \"sl-vue-tree-cursor-inside\":\n                    _vm.cursorPosition &&\n                    _vm.cursorPosition.placement === \"inside\" &&\n                    _vm.cursorPosition.node.pathStr === node.pathStr,\n                  \"sl-vue-tree-node-is-leaf\": node.isLeaf,\n                  \"sl-vue-tree-node-is-folder\": !node.isLeaf\n                },\n                on: {\n                  mousemove: function(event) {\n                    return _vm.onNodeMousemoveHandler(event, node)\n                  },\n                  drop: function(event) {\n                    return _vm.onNodeDropHandler(event, node)\n                  },\n                  mousedown: function(event) {\n                    return _vm.onNodeMousedownHandler(event, node)\n                  },\n                  mouseup: function(event) {\n                    return _vm.onNodeMouseupHandler(event, node)\n                  },\n                  click: function(event) {\n                    return _vm.onNodeClickHandler(event, node)\n                  },\n                  contextmenu: function(event) {\n                    return _vm.emitNodeContextmenu(node, event)\n                  },\n                  dblclick: function(event) {\n                    return _vm.emitNodeDblclick(node, event)\n                  },\n                  dragleave: function(event) {\n                    return _vm.onDragleaveHandler(event, node)\n                  }\n                }\n              },\n              [\n                _vm._l(_vm.gaps, function(gapInd) {\n                  return _c(\"div\", { staticClass: \"sl-vue-tree-gap\" })\n                }),\n                _vm._v(\" \"),\n                _vm.level && _vm.showBranches\n                  ? _c(\n                      \"div\",\n                      { staticClass: \"sl-vue-tree-branch\" },\n                      [\n                        _vm._t(\n                          \"branch\",\n                          [\n                            !node.isLastChild\n                              ? _c(\"span\", [\n                                  _vm._v(\n                                    \"\\n            \" +\n                                      _vm._s(String.fromCharCode(0x251c)) +\n                                      _vm._s(String.fromCharCode(0x2500)) +\n                                      \" \\n          \"\n                                  )\n                                ])\n                              : _vm._e(),\n                            _vm._v(\" \"),\n                            node.isLastChild\n                              ? _c(\"span\", [\n                                  _vm._v(\n                                    \"\\n            \" +\n                                      _vm._s(String.fromCharCode(0x2514)) +\n                                      _vm._s(String.fromCharCode(0x2500)) +\n                                      \" \\n          \"\n                                  )\n                                ])\n                              : _vm._e()\n                          ],\n                          { node: node }\n                        )\n                      ],\n                      2\n                    )\n                  : _vm._e(),\n                _vm._v(\" \"),\n                _c(\n                  \"div\",\n                  { staticClass: \"sl-vue-tree-title\" },\n                  [\n                    !node.isLeaf\n                      ? _c(\n                          \"span\",\n                          {\n                            staticClass: \"sl-vue-tree-toggle\",\n                            on: {\n                              click: function(event) {\n                                return _vm.onToggleHandler(event, node)\n                              }\n                            }\n                          },\n                          [\n                            _vm._t(\n                              \"toggle\",\n                              [\n                                _c(\"span\", [\n                                  _vm._v(\n                                    \"\\n             \" +\n                                      _vm._s(\n                                        !node.isLeaf\n                                          ? node.isExpanded ? \"-\" : \"+\"\n                                          : \"\"\n                                      ) +\n                                      \"\\n            \"\n                                  )\n                                ])\n                              ],\n                              { node: node }\n                            )\n                          ],\n                          2\n                        )\n                      : _vm._e(),\n                    _vm._v(\" \"),\n                    _vm._t(\"title\", [_vm._v(_vm._s(node.title))], {\n                      node: node\n                    })\n                  ],\n                  2\n                ),\n                _vm._v(\" \"),\n                _c(\n                  \"div\",\n                  { staticClass: \"sl-vue-tree-sidebar\" },\n                  [_vm._t(\"sidebar\", null, { node: node })],\n                  2\n                )\n              ],\n              2\n            ),\n            _vm._v(\" \"),\n            _c(\"div\", {\n              directives: [\n                {\n                  name: \"show\",\n                  rawName: \"v-show\",\n                  value:\n                    _vm.cursorPosition &&\n                    _vm.cursorPosition.node.pathStr === node.pathStr &&\n                    _vm.cursorPosition.placement === \"after\",\n                  expression:\n                    \"\\n        cursorPosition &&\\n        cursorPosition.node.pathStr === node.pathStr &&\\n        cursorPosition.placement === 'after'\\n      \"\n                }\n              ],\n              staticClass: \"sl-vue-tree-cursor sl-vue-tree-cursor_after\",\n              on: {\n                dragover: function(event) {\n                  return event.preventDefault()\n                }\n              }\n            }),\n            _vm._v(\" \"),\n            node.children && node.children.length && node.isExpanded\n              ? _c(\"sl-vue-tree\", {\n                  attrs: {\n                    value: node.children,\n                    level: _vm.level + 1,\n                    parentInd: nodeInd,\n                    allowMultiselect: _vm.allowMultiselect,\n                    edgeSize: _vm.edgeSize,\n                    showBranches: _vm.showBranches\n                  },\n                  on: {\n                    dragover: function(event) {\n                      return event.preventDefault()\n                    }\n                  },\n                  scopedSlots: _vm._u([\n                    {\n                      key: \"title\",\n                      fn: function(ref) {\n                        var node = ref.node\n                        return [\n                          _vm._t(\"title\", [_vm._v(_vm._s(node.title))], {\n                            node: node\n                          })\n                        ]\n                      }\n                    },\n                    {\n                      key: \"toggle\",\n                      fn: function(ref) {\n                        var node = ref.node\n                        return [\n                          _vm._t(\n                            \"toggle\",\n                            [\n                              _c(\"span\", [\n                                _vm._v(\n                                  \"\\n             \" +\n                                    _vm._s(\n                                      !node.isLeaf\n                                        ? node.isExpanded ? \"-\" : \"+\"\n                                        : \"\"\n                                    ) +\n                                    \"\\n          \"\n                                )\n                              ])\n                            ],\n                            { node: node }\n                          )\n                        ]\n                      }\n                    },\n                    {\n                      key: \"sidebar\",\n                      fn: function(ref) {\n                        var node = ref.node\n                        return [_vm._t(\"sidebar\", null, { node: node })]\n                      }\n                    }\n                  ])\n                })\n              : _vm._e()\n          ],\n          1\n        )\n      }),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        {\n          directives: [\n            {\n              name: \"show\",\n              rawName: \"v-show\",\n              value: _vm.isDragging,\n              expression: \"isDragging\"\n            }\n          ],\n          ref: \"dragInfo\",\n          staticClass: \"sl-vue-tree-drag-info\"\n        },\n        [\n          _vm._t(\"draginfo\", [\n            _vm._v(\"\\n      Items: \" + _vm._s(_vm.selectionSize) + \"\\n    \")\n          ])\n        ],\n        2\n      )\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\nexport { render, staticRenderFns }\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n    require(\"vue-hot-reload-api\")      .rerender(\"data-v-0b7c263a\", { render: render, staticRenderFns: staticRenderFns })\n  }\n}","var disposed = false\n/* script */\nexport * from \"!!babel-loader!./sl-vue-tree.js\"\nimport __vue_script__ from \"!!babel-loader!./sl-vue-tree.js\"/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0b7c263a\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./sl-vue-tree.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src\\\\sl-vue-tree.vue\"\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-0b7c263a\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-0b7c263a\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n"],"sourceRoot":""}